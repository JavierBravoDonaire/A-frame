<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>Practicando con A-Frame</title>
   		<meta name="description" content="Practicando con A-Frame">
		<script src="../assets/js/aframe.min.js"></script>
	</head>
	<body>
		<a-scene>
			<a-assets>
				<img id="yard" src="../assets/imgs/yard.jpg">
				<img id="jason" src="../assets/imgs/jason.jpg">
				<img id="door" src="../assets/imgs/door.png">
				<audio id="closedoor" src="../assets/sounds/close_door.mp3">
			</a-assets>

			<a-box position="0 0.5 -4" rotation="0 0 0" scale="1 1 1"
				src="#jason"></a-box>
			<a-box id="button" position="1.2 1.5 -3" rotation="0 0 0" scale="0.2 0.2 0.2"
				color="black"></a-box>
			<a-plane position="0 0 -4" rotation="-90 0 0" width="60" height="20"
				src="#yard" static-body></a-plane>
			<a-box id="puerta" position="0 1.5 -3" src="#door"
				width="1.5" height="3" depth="0.075" dynamic-body></a-box>
			<a-sky color="grey"></a-sky>

			<a-entity>
				<a-camera>
					<a-cursor></a-cursor>
				</a-camera>
			</a-entity>
		</a-scene>

		<script>
			var puertaEl = document.querySelector('#puerta');
			var buttonEl = document.querySelector('#button');
			let playing = false;
			let audio = document.querySelector("#closedoor");

			buttonEl.addEventListener('click', function() {
          		if(!playing) {
              		audio.play();
           		} else {
              		audio.pause();
              		audio.currentTime = 0;
           		}
           		playing = !playing;

				if(puertaEl.getAttribute('rotation').y == -90){
					puertaEl.setAttribute('rotation', '0 0 0');
					puertaEl.setAttribute('position', '0 1.5 -3');
				}else{
					puertaEl.setAttribute('rotation', '0 -90 0');
					puertaEl.setAttribute('position', '-0.75 1.5 -2.25');
				}
			});
			buttonEl.addEventListener('mouseenter', function() {
				buttonEl.setAttribute('color', "gray");
				buttonEl.setAttribute('scale', "0.22 0.22 0.22");
			});
			buttonEl.addEventListener('mouseleave', function() {
				buttonEl.setAttribute('color', "black");
			});
		</script>
	</body>
</html>
